# Vercel Postgres設定
# 重要: 以下のパラメータを必ず追加してください

# Pooled connection (Prismaで使用)
POSTGRES_PRISMA_URL="postgresql://user:password@host:5432/database?pgbouncer=true&connect_timeout=15&pool_timeout=15&connection_limit=1"

# Direct connection (マイグレーション用)
POSTGRES_URL_NON_POOLING="postgresql://user:password@host:5432/database"

# パラメータの説明:
# pgbouncer=true - PgBouncerを有効化（必須）
# connect_timeout=15 - 接続タイムアウト（秒）
# pool_timeout=15 - プール取得タイムアウト（秒）  
# connection_limit=1 - サーバーレス関数あたりの接続数を1に制限（重要）

# Vercelダッシュボードでの設定:
# 1. Settings > Environment Variables
# 2. 上記の形式でPOSTGRES_PRISMA_URLを設定
# 3. Storage > Database > Settingsで以下を確認:
#    - Max connections: 20-30に設定
#    - Connection pooling: 有効化